#!/bin/bash

set -e
set -v

cd "$HOME"

if [[ -d .dotfiles ]]
then
    cd .dotfiles
    git pull --rebase origin master
    cd "$HOME"
else
    git clone git@github.com:selassid/dotfiles.git .dotfiles
fi

if [[ ! $(which stow) ]]
then
    if [[ ! $(which brew) ]]
    then
        ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
    fi
    brew install stow
fi

stow -d .dotfiles -t "$HOME" shell emacs git ssh

bash <(curl -fksSL https://raw.github.com/overtone/emacs-live/master/installer/install-emacs-live.sh)
